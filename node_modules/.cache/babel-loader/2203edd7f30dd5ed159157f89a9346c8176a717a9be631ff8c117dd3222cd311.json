{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';import React,{useContext,useEffect,useReducer,useState}from'react';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Container from'react-bootstrap/Container';import{Helmet}from'react-helmet-async';import{useNavigate,useParams}from'react-router-dom';import{toast}from'react-toastify';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{Store}from'../Store';import{getError}from'../utils';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});case'UPDATE_REQUEST':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:true});case'UPDATE_SUCCESS':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});case'UPDATE_FAIL':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});default:return state;}};export default function UserEditScreen(){var _useReducer=useReducer(reducer,{loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,loadingUpdate=_useReducer2$.loadingUpdate,dispatch=_useReducer2[1];var _useContext=useContext(Store),state=_useContext.state;var userInfo=state.userInfo;var params=useParams();var userId=params.id;var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:'FETCH_REQUEST'});_context.next=4;return axios.get(\"https://apiwenandapp.onrender.com/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setName(data.name);setEmail(data.email);setIsAdmin(data.isAdmin);dispatch({type:'FETCH_SUCCESS'});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);dispatch({type:'FETCH_FAIL',payload:getError(_context.t0)});case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[userId,userInfo]);var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;dispatch({type:'UPDATE_REQUEST'});_context2.next=5;return axios.put(\"https://apiwenandapp.onrender.com/api/users/\".concat(userId),{_id:userId,name:name,email:email,isAdmin:isAdmin},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:dispatch({type:'UPDATE_SUCCESS'});toast.success('User updated successfully');navigate('/admin/users');_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);toast.error(getError(_context2.t0));dispatch({type:'UPDATE_FAIL'});case 14:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Edit User $\",userId]})}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Edit User \",userId]}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:email,type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(Form.Check,{className:\"mb-3\",type:\"checkbox\",id:\"isAdmin\",label:\"isAdmin\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Button,{disabled:loadingUpdate,type:\"submit\",children:\"Update\"}),loadingUpdate&&/*#__PURE__*/_jsx(LoadingBox,{})]})]})]});}","map":{"version":3,"names":["axios","React","useContext","useEffect","useReducer","useState","Form","Button","Container","Helmet","useNavigate","useParams","toast","LoadingBox","MessageBox","Store","getError","reducer","state","action","type","loading","error","payload","loadingUpdate","UserEditScreen","dispatch","userInfo","params","userId","id","navigate","name","setName","email","setEmail","isAdmin","setIsAdmin","fetchData","get","headers","Authorization","token","data","submitHandler","e","preventDefault","put","_id","success","target","value","checked"],"sources":["C:/Users/Admin/Downloads/mern-amazona-master/frontend/src/screens/UserEditScreen.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport { Helmet } from 'react-helmet-async';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return { ...state, loading: false };\n    case 'FETCH_FAIL':\n      return { ...state, loading: false, error: action.payload };\n    case 'UPDATE_REQUEST':\n      return { ...state, loadingUpdate: true };\n    case 'UPDATE_SUCCESS':\n      return { ...state, loadingUpdate: false };\n    case 'UPDATE_FAIL':\n      return { ...state, loadingUpdate: false };\n    default:\n      return state;\n  }\n};\n\nexport default function UserEditScreen() {\n  const [{ loading, error, loadingUpdate }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: '',\n  });\n\n  const { state } = useContext(Store);\n  const { userInfo } = state;\n\n  const params = useParams();\n  const { id: userId } = params;\n  const navigate = useNavigate();\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        dispatch({ type: 'FETCH_REQUEST' });\n        const { data } = await axios.get(`https://apiwenandapp.onrender.com/api/users/${userId}`, {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n        setName(data.name);\n        setEmail(data.email);\n        setIsAdmin(data.isAdmin);\n        dispatch({ type: 'FETCH_SUCCESS' });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(err),\n        });\n      }\n    };\n    fetchData();\n  }, [userId, userInfo]);\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    try {\n      dispatch({ type: 'UPDATE_REQUEST' });\n      await axios.put(\n        `https://apiwenandapp.onrender.com/api/users/${userId}`,\n        { _id: userId, name, email, isAdmin },\n        {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        }\n      );\n      dispatch({\n        type: 'UPDATE_SUCCESS',\n      });\n      toast.success('User updated successfully');\n      navigate('/admin/users');\n    } catch (error) {\n      toast.error(getError(error));\n      dispatch({ type: 'UPDATE_FAIL' });\n    }\n  };\n  return (\n    <Container className=\"small-container\">\n      <Helmet>\n        <title>Edit User ${userId}</title>\n      </Helmet>\n      <h1>Edit User {userId}</h1>\n\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <Form onSubmit={submitHandler}>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Name</Form.Label>\n            <Form.Control\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"email\">\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              value={email}\n              type=\"email\"\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </Form.Group>\n\n          <Form.Check\n            className=\"mb-3\"\n            type=\"checkbox\"\n            id=\"isAdmin\"\n            label=\"isAdmin\"\n            checked={isAdmin}\n            onChange={(e) => setIsAdmin(e.target.checked)}\n          />\n\n          <div className=\"mb-3\">\n            <Button disabled={loadingUpdate} type=\"submit\">\n              Update\n            </Button>\n            {loadingUpdate && <LoadingBox></LoadingBox>}\n          </div>\n        </Form>\n      )}\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}