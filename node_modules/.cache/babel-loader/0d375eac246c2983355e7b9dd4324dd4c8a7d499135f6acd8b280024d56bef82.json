{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\mern-amazona-master\\\\frontend\\\\src\\\\screens\\\\ZalopayScreens.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios'; // npm install axios\nimport CryptoJS from 'crypto-js'; // npm install crypto-js\nimport { v1 as uuid } from 'uuid'; // npm install uuid\nimport moment from 'moment'; // npm install moment\nimport { dateFormat } from 'date-fns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ZalopayScreens = () => {\n  const handleSandboxPayment = async () => {\n    const config = {\n      appid: \"553\",\n      key1: \"9phuAOYhan4urywHTh0ndEXiV3pKHr5Q\",\n      key2: \"Iyz2habzyr7AG8SgvoBCbKwKi3UzlLi3\",\n      endpoint: \"https://sb-openapi.zalopay.vn/v2/create\"\n    };\n    const embeddata = {\n      merchantinfo: \"embeddata123\"\n    };\n    const items = [{\n      itemid: \"knb\",\n      itemname: \"kim nguyen bao\",\n      itemprice: 198400,\n      itemquantity: 1\n    }];\n    const order = {\n      appid: config.appid,\n      apptransid: `${moment().format('YYMMDD')}_${uuid()}`,\n      // mã giao dich có định dạng yyMMdd_xxxx\n      appuser: \"demo\",\n      apptime: Date.now(),\n      // miliseconds\n      item: JSON.stringify(items),\n      embeddata: JSON.stringify(embeddata),\n      amount: 50000,\n      description: \"ZaloPay Integration Demo\",\n      bankcode: \"zalopayapp\"\n    };\n\n    // appid|apptransid|appuser|amount|apptime|embeddata|item\n    const data = config.appid + \"|\" + order.apptransid + \"|\" + order.appuser + \"|\" + order.amount + \"|\" + order.apptime + \"|\" + order.embeddata + \"|\" + order.item;\n    order.mac = CryptoJS.HmacSHA256(data, config.key1).toString();\n    var date = new Date();\n    console.log(dateFormat(date, 'yyyymmddHHmmss'));\n    axios.post(config.endpoint, null, {\n      params: order\n    }).then(res => {\n      console.log(res.data);\n    }).catch(err => console.log(err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Ch\\u1ECDn ZaloPay Sandbox \\u0111\\u1EC3 thanh to\\xE1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSandboxPayment,\n      children: \"Thanh to\\xE1n v\\u1EDBi ZaloPay Sandbox\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_c = ZalopayScreens;\nexport default ZalopayScreens;\nvar _c;\n$RefreshReg$(_c, \"ZalopayScreens\");","map":{"version":3,"names":["React","useState","axios","CryptoJS","v1","uuid","moment","dateFormat","ZalopayScreens","handleSandboxPayment","config","appid","key1","key2","endpoint","embeddata","merchantinfo","items","itemid","itemname","itemprice","itemquantity","order","apptransid","format","appuser","apptime","Date","now","item","JSON","stringify","amount","description","bankcode","data","mac","HmacSHA256","toString","date","console","log","post","params","then","res","catch","err"],"sources":["C:/Users/Admin/Downloads/mern-amazona-master/frontend/src/screens/ZalopayScreens.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios' // npm install axios\r\nimport CryptoJS from'crypto-js' // npm install crypto-js\r\nimport { v1 as uuid} from  'uuid'// npm install uuid\r\nimport moment from'moment'// npm install moment\r\nimport { dateFormat } from 'date-fns';\r\nconst ZalopayScreens = () => {\r\n const  handleSandboxPayment = async () => {\r\n  const config = {\r\n    appid: \"553\",\r\n    key1: \"9phuAOYhan4urywHTh0ndEXiV3pKHr5Q\",\r\n    key2: \"Iyz2habzyr7AG8SgvoBCbKwKi3UzlLi3\",\r\n    endpoint: \"https://sb-openapi.zalopay.vn/v2/create\"\r\n  };\r\n  \r\n  const embeddata = {\r\n    merchantinfo: \"embeddata123\"\r\n  };\r\n  \r\n  const items = [{\r\n    itemid: \"knb\",\r\n    itemname: \"kim nguyen bao\",\r\n    itemprice: 198400,\r\n    itemquantity: 1\r\n  }];\r\n  \r\n  const order = {\r\n    appid: config.appid, \r\n    apptransid: `${moment().format('YYMMDD')}_${uuid()}`, // mã giao dich có định dạng yyMMdd_xxxx\r\n    appuser: \"demo\", \r\n    apptime: Date.now(), // miliseconds\r\n    item: JSON.stringify(items), \r\n    embeddata: JSON.stringify(embeddata), \r\n    amount: 50000, \r\n    description: \"ZaloPay Integration Demo\",\r\n    bankcode: \"zalopayapp\", \r\n  };\r\n  \r\n  // appid|apptransid|appuser|amount|apptime|embeddata|item\r\n  const data = config.appid + \"|\" + order.apptransid + \"|\" + order.appuser + \"|\" + order.amount + \"|\" + order.apptime + \"|\" + order.embeddata + \"|\" + order.item;\r\n  order.mac = CryptoJS.HmacSHA256(data, config.key1).toString();\r\n  var date = new Date()\r\n  console.log(dateFormat(date ,'yyyymmddHHmmss'));\r\n  axios.post(config.endpoint, null, { params: order })\r\n    .then(res => {\r\n      console.log(res.data);\r\n    })\r\n    .catch(err => console.log(err));\r\n  }\r\n  return (\r\n    <div>\r\n    <h1>Chọn ZaloPay Sandbox để thanh toán</h1>\r\n    <button onClick={handleSandboxPayment}>Thanh toán với ZaloPay Sandbox</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ZalopayScreens;\r\n\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO,EAAC;AAC1B,OAAOC,QAAQ,MAAK,WAAW,EAAC;AAChC,SAASC,EAAE,IAAIC,IAAI,QAAQ,MAAM;AACjC,OAAOC,MAAM,MAAK,QAAQ;AAC1B,SAASC,UAAU,QAAQ,UAAU;AAAC;AACtC,MAAMC,cAAc,GAAG,MAAM;EAC5B,MAAOC,oBAAoB,GAAG,YAAY;IACzC,MAAMC,MAAM,GAAG;MACbC,KAAK,EAAE,KAAK;MACZC,IAAI,EAAE,kCAAkC;MACxCC,IAAI,EAAE,kCAAkC;MACxCC,QAAQ,EAAE;IACZ,CAAC;IAED,MAAMC,SAAS,GAAG;MAChBC,YAAY,EAAE;IAChB,CAAC;IAED,MAAMC,KAAK,GAAG,CAAC;MACbC,MAAM,EAAE,KAAK;MACbC,QAAQ,EAAE,gBAAgB;MAC1BC,SAAS,EAAE,MAAM;MACjBC,YAAY,EAAE;IAChB,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAG;MACZX,KAAK,EAAED,MAAM,CAACC,KAAK;MACnBY,UAAU,EAAG,GAAEjB,MAAM,EAAE,CAACkB,MAAM,CAAC,QAAQ,CAAE,IAAGnB,IAAI,EAAG,EAAC;MAAE;MACtDoB,OAAO,EAAE,MAAM;MACfC,OAAO,EAAEC,IAAI,CAACC,GAAG,EAAE;MAAE;MACrBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACd,KAAK,CAAC;MAC3BF,SAAS,EAAEe,IAAI,CAACC,SAAS,CAAChB,SAAS,CAAC;MACpCiB,MAAM,EAAE,KAAK;MACbC,WAAW,EAAE,0BAA0B;MACvCC,QAAQ,EAAE;IACZ,CAAC;;IAED;IACA,MAAMC,IAAI,GAAGzB,MAAM,CAACC,KAAK,GAAG,GAAG,GAAGW,KAAK,CAACC,UAAU,GAAG,GAAG,GAAGD,KAAK,CAACG,OAAO,GAAG,GAAG,GAAGH,KAAK,CAACU,MAAM,GAAG,GAAG,GAAGV,KAAK,CAACI,OAAO,GAAG,GAAG,GAAGJ,KAAK,CAACP,SAAS,GAAG,GAAG,GAAGO,KAAK,CAACO,IAAI;IAC9JP,KAAK,CAACc,GAAG,GAAGjC,QAAQ,CAACkC,UAAU,CAACF,IAAI,EAAEzB,MAAM,CAACE,IAAI,CAAC,CAAC0B,QAAQ,EAAE;IAC7D,IAAIC,IAAI,GAAG,IAAIZ,IAAI,EAAE;IACrBa,OAAO,CAACC,GAAG,CAAClC,UAAU,CAACgC,IAAI,EAAE,gBAAgB,CAAC,CAAC;IAC/CrC,KAAK,CAACwC,IAAI,CAAChC,MAAM,CAACI,QAAQ,EAAE,IAAI,EAAE;MAAE6B,MAAM,EAAErB;IAAM,CAAC,CAAC,CACjDsB,IAAI,CAACC,GAAG,IAAI;MACXL,OAAO,CAACC,GAAG,CAACI,GAAG,CAACV,IAAI,CAAC;IACvB,CAAC,CAAC,CACDW,KAAK,CAACC,GAAG,IAAIP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC,CAAC;EACjC,CAAC;EACD,oBACE;IAAA,wBACA;MAAA,UAAI;IAAkC;MAAA;MAAA;MAAA;IAAA,QAAK,eAC3C;MAAQ,OAAO,EAAEtC,oBAAqB;MAAA,UAAC;IAA8B;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QACxE;AAEV,CAAC;AAAC,KAjDID,cAAc;AAmDpB,eAAeA,cAAc;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}