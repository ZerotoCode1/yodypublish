{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Downloads/mern-amazona-master/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import Form from'react-bootstrap/Form';import{useNavigate,useParams}from'react-router-dom';import{Store}from'../Store';import React,{useContext,useEffect,useReducer,useState}from'react';import Row from\"react-bootstrap/Row\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function VnpayScreen(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),vnorrder=_useState2[0],setvnorder=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),banking=_useState4[0],setbanking=_useState4[1];var _useContext=useContext(Store),state=_useContext.state;var userInfo=state.userInfo;var params=useParams();var orderId=params.id;useEffect(function(){var fetchOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://apiwenandapp.onrender.com/api/orders/\".concat(orderId),{headers:{authorization:\"Bearer \".concat(userInfo.token)}});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setvnorder(data);console.log(data);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function fetchOrder(){return _ref.apply(this,arguments);};}();fetchOrder();},[]);var handlerclick=function handlerclick(){console.log(vnorrder.totalPrice);try{var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('https://apiwenandapp.onrender.com/api/orders/create_payment_url',{vnorrder:vnorrder,bank:banking});case 2:data=_context2.sent;window.location.href=data.data;case 4:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();}catch(error){}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100vh\"// Đảm bảo nút nằm giữa màn hình dọc\n},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"200px\",// Điều chỉnh chiều rộng của nút theo nhu cầu của bạn\nborder:\"1px solid #ccc\",// Đây chỉ là ví dụ để thấy rõ kích thước của nút\npadding:\"10px\",textAlign:\"center\",cursor:\"pointer\"},onClick:handlerclick,children:\"Click \\u0111\\u1EC3 chuy\\u1EC3n sang thanh to\\xE1n\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"rating\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Ch\\u1ECDn ng\\xE2n h\\xE0ng thanh to\\xE1n\"}),/*#__PURE__*/_jsxs(Form.Select,{\"aria-label\":\"Rating\",required:true,value:\"fsd\",onChange:function onChange(e){return setbanking(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NCB\",children:\"NCB\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VISA\",children:\"VISA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MasterCard\",children:\"MasterCard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"JCB\",children:\"JCB\"})]})]})})]});}export default VnpayScreen;","map":{"version":3,"names":["axios","Form","useNavigate","useParams","Store","React","useContext","useEffect","useReducer","useState","Row","VnpayScreen","vnorrder","setvnorder","banking","setbanking","state","userInfo","params","orderId","id","fetchOrder","get","headers","authorization","token","data","console","log","handlerclick","totalPrice","fetchData","post","bank","window","location","href","error","display","justifyContent","alignItems","height","width","border","padding","textAlign","cursor","e","target","value"],"sources":["C:/Users/Admin/Downloads/mern-amazona-master/frontend/src/screens/VnpayScreen.js"],"sourcesContent":["import axios from 'axios';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { Store } from '../Store';\r\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\r\nimport Row from \"react-bootstrap/Row\";\r\nfunction VnpayScreen() {\r\n    const [vnorrder,setvnorder]=useState()\r\n    const [banking,setbanking]=useState()\r\n    const { state } = useContext(Store);\r\n    const { userInfo } = state;\r\n    const params = useParams();\r\n  const { id: orderId } = params; \r\n  useEffect(() => {\r\n    const fetchOrder = async () => {\r\n      try {\r\n        const { data } = await axios.get(`https://apiwenandapp.onrender.com/api/orders/${orderId}`, {\r\n        headers: { authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        setvnorder(data)\r\n        console.log(data);\r\n      } catch (err) {\r\n      }\r\n    };\r\n    fetchOrder()\r\n  },[])\r\n         const handlerclick=()=>{\r\n            console.log(vnorrder.totalPrice\r\n                );\r\n            try {\r\n                const fetchData = async ()=>{\r\n                    const data = await axios.post('https://apiwenandapp.onrender.com/api/orders/create_payment_url',\r\n                     {\r\n                        vnorrder:vnorrder,\r\n                        bank:banking\r\n                     }\r\n                    )\r\n                   window.location.href=data.data\r\n                }\r\n                fetchData()\r\n              \r\n            } catch (error) {\r\n                \r\n            }\r\n         }\r\n  return (\r\n    <div style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100vh\", // Đảm bảo nút nằm giữa màn hình dọc\r\n    }}>\r\n        <div\r\n            style={{\r\n                width: \"200px\", // Điều chỉnh chiều rộng của nút theo nhu cầu của bạn\r\n                border: \"1px solid #ccc\", // Đây chỉ là ví dụ để thấy rõ kích thước của nút\r\n                padding: \"10px\",\r\n                textAlign: \"center\",\r\n                cursor: \"pointer\",\r\n            }}\r\n            onClick={handlerclick}\r\n        >\r\n            Click để chuyển sang thanh toán\r\n        </div>\r\n       \r\n        <Form.Group  className=\"mb-3\" controlId=\"rating\">\r\n        <Row>\r\n        <Form.Label>Chọn ngân hàng thanh toán</Form.Label>\r\n        <Form.Select\r\n          aria-label=\"Rating\"\r\n          required\r\n          value={\"fsd\"}\r\n           onChange={(e) => setbanking(e.target.value)}\r\n        >\r\n          <option value=\"\">Select...</option>\r\n          <option value=\"NCB\">NCB</option>\r\n          <option value=\"VISA\">VISA</option>\r\n          <option value=\"MasterCard\">MasterCard</option>\r\n          <option value=\"JCB\">JCB</option>\r\n        </Form.Select>\r\n        </Row>\r\n        \r\n      </Form.Group>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VnpayScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}